<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Lista de Resgates</title>
        <link
            rel="stylesheet"
            href="../../public/styles/pages/rescues/rescue.css"
        />
    </head>
    <body>
        <div class="container">
            <h1>Lista de Resgates</h1>
            <div id="rescues-list">
                <!-- Rescues will be displayed here -->
            </div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                fetch("/api/content/rescues/show_rescues.php")
                    .then((response) => response.json())
                    .then((data) => {
                        const rescuesList =
                            document.getElementById("rescues-list");
                        if (data.length > 0) {
                            data.forEach((rescue) => {
                                const rescueItem =
                                    document.createElement("div");
                                rescueItem.classList.add("rescue-item");
                                rescueItem.innerHTML = `
                                <h2>${rescue.name}</h2>
                                <p><strong>Email:</strong> ${rescue.email}</p>
                                <p><strong>Telefone:</strong> ${rescue.phone}</p>
                                <p><strong>CEP:</strong> ${rescue.cep}</p>
                                <p><strong>Estado:</strong> ${rescue.state}</p>
                                <p><strong>Cidade:</strong> ${rescue.city}</p>
                                <p><strong>Bairro:</strong> ${rescue.neighborhood}</p>
                                <p><strong>Rua:</strong> ${rescue.street}</p>
                                <p><strong>Características:</strong> ${rescue.characteristics}</p>
                                <p><strong>Observações:</strong> ${rescue.observations}</p>
                            `;
                                rescuesList.appendChild(rescueItem);
                            });
                        } else {
                            rescuesList.innerHTML =
                                "<p>Nenhum resgate encontrado.</p>";
                        }
                    })
                    .catch((error) => {
                        console.error("Erro ao buscar resgates:", error);
                        const rescuesList =
                            document.getElementById("rescues-list");
                        rescuesList.innerHTML =
                            "<p>Erro ao carregar resgates. Tente novamente mais tarde.</p>";
                    });
            });
        </script>
    </body>
</html>
